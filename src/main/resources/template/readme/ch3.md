# 테스트 주도 개발의 패턴
- - -
## 테스트 주도 개발 패턴

1. 테스트 한다는건 무엇을 뜻하는지?
2. 언제 테스트를 해야 하는지?
3. 테스트할 로직을 어떻게 고를지?
4. 테스트할 데이터를 어떻게 고를지?

### 테스트란?   
```테스트할 시간이 어딨어. 그냥 릴리즈해``` 이 장면에 대해서는 결과를 보장할 수 없다. 스트레스를 점점 많이 받으면 결국 실패하게 된다.
    - 스트레스를 받으면 테스트를 실행한다. 테스트를 실행하면 스트레스를 받는다.
        - 이 부분의 경우 자동화된 테스트가 존재하다면 두려운 정도를 선택할 수 있다. (스트레스 또한 줄일 수 있게 된다.)

### 격리된 테스트
```매일 아침 출근하면 지난밤 테스트 결과를 담은 종이더미가 놓여 있었다.``` 이 경험에서 두 가지의 교훈을 얻을 수 있었다.
1. 테스트가 충분히 빨라서 내가 직접, 자주 실행할 수 있게끔 만들자.
   - 내가 만든 에러를 누구보다 빠르게 잡을 수 있음.
2. 많은 양의 실패 테스트가 반드 시 양의 문제가 아닐 수 도있다.
   - 앞 부분에서 실행된 테스트가 실패한 후 그 영향으로 다음 테스트부터는 시스템이 예측 불가능한 상태에 놓이는 경우가 허다하다.
      - 그렇기에 테스트는 작은 스케일로 진행하며, 각각의 테스트와 완전히 독립적이어야 한다.

### 테스트 목록
해야하는 목록이 많아질 수록 내가 하던 일에 대한 집중력이 떨어진다. 집중력이 떨어지면 할일이 많아진다.
 - 머릿속에 있는 목록에서 임의의 항목을 무시하고 변덕스럽게 프로그래밍을 할 경우 이 악순환에서 벗어날 수 없게 된다.

### 테스트 우선
테스트는 대상이 되는 코드를 작성하기 직전에 작성하는 것이 좋다. ```스트레스 - 테스트``` 에서도 테스트가 먼저가 된다면 스트레스가 줄어 테스트도 줄게된다.

### 단언 우선
테스트를 작성할 때 단언은 가장 먼저 사용해라.
단언을 먼저 사용할 경우 작업을 단순하게 만드는 강력한 효과를 볼 수 있다. 구현에 대해 전혀 고려하지 않고 테스트만 작성할 때도 몇 가지 문제들을 한번에 해결하는 것이다.
1. 시스템을 개발할 때 무슨 일부터 하는가? 완료된 시스템은 이럴 것 이다! 라는 이야기 부터 작성한다.
2. 특정 기는을 개발할 때 무슨 일부터 하는가? 기능이 완료되면 통과할 수 있는 테스트 부터 작성한다.
3. 테스트를 개발할 때 무슨 일부터 하는가? 완료될 때 통과해야 할 단 언부터 작성한다.

### 테스트 데이터
1. 테스트를 읽을 때 쉽고 따라갈 수 있을만한 좋은 데이터를 사용해라 테스트 작성에도 청중이 존재한다.
2. 단지 데이터 값을 산발하기 위해 데이터 값을 산발하지 마라.
3. 데이터 간에 차이가 있다면 그 속에 어떤 의미가 있어야한다.
4. 만약 1과 2사이에 어떠한 개념적 차이도 없다면 1을 사용해라.
5. 여러 입력을 다루어야 한다면 테스트 또한 여러 입력을 반영해라.
6. 테스트 데이터에 대한 대안은 실제 세상에서 얻어진 실제 데이터를 사용하는 것이다.
   - 실제 실행을 통해 수집한 외부 이벤트의 결과를 이용하여 실시간 시스템을 테스트하고자 하는 경우.
   - 예전 시스템의 출력과 현재 시스템의 출력을 비교하는 경우(병렬)
   - 시뮬레이션 시스템을 리팩토링한 후 기존과 정확히 동일한 결과가 나오는지 확인하고자 하는 경우

### 명백한 데이터
테스트를 작성할 때는 컴퓨터뿐 아니라 후에 코드를 읽을 다른 사람들도 생각해야 한다.
    - 추후 자신의 코드를 보며 무슨 생각으로 이 코드를 짯는지 의문이 들 수 있다.

## 빨간 막대 패턴
이 패턴들은
 - 테스트를 언제, 어디에 작성할 것인지?
 - 테스트 작성을 언제 멈출 출지에 대한 것이다.

### 한 단계 테스트
하향식, 상향식 둘 다 모두 TDD의 프로세스를 효과적으로 설명할 수 없다. 첫째로 이와 같은 수직적 메타포는 프로그램이 시간에 따라 어떻게 변해 가는지에 대한 단순화된 시각일 뿐이다.
이보다 성장이란 단어를 보면 일종의 자기 유사성을 가진  피드백 고리를 암시하는데, 이 피드백 고리에서 환경이 프로그램에 영향을 주고 프로그램이 다시 환경에 영향을 준다.
둘째로 만약 메타포가 어떤 방향성을 가질 필요가 있다면 (상향 혹은 하향보다는) 아는 것에서 모르는 것으로 라는 방향이 유용할 것이다.

### 시작 테스트
어떤 테스트부터 시작해야 좋을지? 첫 걸음으로 현실적인 테스트를 하나 작성한다면 상당히 많은 문제를 한번에 해결해야 하는 상황이 될 것이다.
빨/초/리팩, 빨/초/리팩 주기가 짧은걸 원할 수록 정말 발견하기 쉬운 입력과 출력을 사용하여 이 테스트 시간을 짧게 줄일 수 있다.
한 단게 테스트는 시작 테스트에도 적용이 되며, 당신에게 뭔가를 가르켜 줄 수 있으면서도 빠르게 구현할 수 있는 테스트를 선택해라

### 설명 테스트
자동화된 테스트가 널리 쓰이게 하려면 테스트를 통해 설명을 요청하고 테스트를 통해 설명해야 한다.
더 넘어가 추후에는 시퀀스 다이어그램에 나타난 모든 요소들을 포함하는 테스트 케이스를 작성해 볼 수 있다.

### 학습 테스트
새로운 클래스, 새로운 메서드를 곧 바로 사용하는 것 보다는 API가 우리 예상대로 흘러가는지 확인하는 작은 테스트를 만들어서 테스트 할 수 있다.

### 또 다른 테스트
새 아이디어가 떠오르면 존중하고 맞이하되 그것이 내 주의를 흩뜨리지 않게 한다. 그 아이디어를 리스트에 적어놓고는 하던 일로 다시 돌아간다.

### 회귀 테스트
회귀 테스트란 사실 완벽한 선견지명이 있다면, 처음 코딩할 때 작성해야 하는 테스트 이다.
전체 애플리케이션 차원에서 테스트를 수행하는 것에서도 가치를 얻을 수 있다. 애플리케이션 차원의 회귀 테스트는 시스템의 사용자들이 여러분에게 정확히 무엇을 기대했으며 무엇이 잘못되었는지 말할 기회를 준다.
좀더 작은 차원에서 회귀 테스트는 당신의 테스트를 개선하는 방법이 된다.

### 휴식
지치고 고난에 빠질 때에는 휴식이다.
피로가 쌓이면 판단력이 흐려진다.
판단력이 흐려지면 피로가 쌓인다.

### 다시 하기
길을 잃었을 때에는 모든 코드를 다 지워버리고 처음부터 다시 해보자. ```다시```

### 싸구려 책상, 좋은 의자
책상보다는 진짜 진짜 좋은 의자를 사용하자...

